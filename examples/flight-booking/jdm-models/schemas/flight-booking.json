{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "FlightBooking",
  "type": "object",
  "required": [
    "passengers",
    "status",
    "tripType"
  ],
  "properties": {
    "bookingReference": {
      "type": [
        "string",
        "null"
      ]
    },
    "departureDate": {
      "type": [
        "string",
        "null"
      ]
    },
    "destination": {
      "anyOf": [
        {
          "$ref": "#/definitions/AirportCode"
        },
        {
          "type": "null"
        }
      ]
    },
    "insurance": {
      "anyOf": [
        {
          "$ref": "#/definitions/Insurance"
        },
        {
          "type": "null"
        }
      ]
    },
    "isInternational": {
      "type": [
        "boolean",
        "null"
      ]
    },
    "origin": {
      "anyOf": [
        {
          "$ref": "#/definitions/AirportCode"
        },
        {
          "type": "null"
        }
      ]
    },
    "passengers": {
      "$ref": "#/definitions/Passengers"
    },
    "payment": {
      "anyOf": [
        {
          "$ref": "#/definitions/Payment"
        },
        {
          "type": "null"
        }
      ]
    },
    "pricing": {
      "anyOf": [
        {
          "$ref": "#/definitions/Pricing"
        },
        {
          "type": "null"
        }
      ]
    },
    "requiresVisa": {
      "type": [
        "boolean",
        "null"
      ]
    },
    "returnDate": {
      "type": [
        "string",
        "null"
      ]
    },
    "searchResults": {
      "anyOf": [
        {
          "$ref": "#/definitions/SearchResults"
        },
        {
          "type": "null"
        }
      ]
    },
    "selectedOutboundFlight": {
      "anyOf": [
        {
          "$ref": "#/definitions/FlightSelection"
        },
        {
          "type": "null"
        }
      ]
    },
    "selectedReturnFlight": {
      "anyOf": [
        {
          "$ref": "#/definitions/FlightSelection"
        },
        {
          "type": "null"
        }
      ]
    },
    "status": {
      "$ref": "#/definitions/BookingStatus"
    },
    "tripType": {
      "$ref": "#/definitions/TripType"
    }
  },
  "definitions": {
    "AirportCode": {
      "type": "string"
    },
    "BookingStatus": {
      "type": "string",
      "enum": [
        "search_criteria",
        "flight_search_results",
        "outbound_flight_selection",
        "return_flight_selection",
        "passenger_details",
        "insurance_selection",
        "payment_details",
        "booking_confirmation",
        "completed",
        "cancelled"
      ]
    },
    "CabinClass": {
      "type": "string",
      "enum": [
        "economy",
        "premium_economy",
        "business",
        "first"
      ]
    },
    "FlightOption": {
      "type": "object",
      "required": [
        "airline",
        "arrival",
        "available",
        "departure",
        "flightId",
        "price"
      ],
      "properties": {
        "aircraft": {
          "type": [
            "string",
            "null"
          ]
        },
        "airline": {
          "type": "string"
        },
        "arrival": {
          "type": "string"
        },
        "available": {
          "type": "boolean"
        },
        "cabinClass": {
          "anyOf": [
            {
              "$ref": "#/definitions/CabinClass"
            },
            {
              "type": "null"
            }
          ]
        },
        "departure": {
          "type": "string"
        },
        "duration": {
          "type": [
            "string",
            "null"
          ]
        },
        "flightId": {
          "type": "string"
        },
        "flightNumber": {
          "type": [
            "string",
            "null"
          ]
        },
        "price": {
          "type": "number",
          "format": "double"
        },
        "seatsRemaining": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint32",
          "minimum": 0.0
        },
        "stops": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "FlightSelection": {
      "type": "object",
      "required": [
        "airline",
        "arrival",
        "departure",
        "flightId",
        "price"
      ],
      "properties": {
        "aircraft": {
          "type": [
            "string",
            "null"
          ]
        },
        "airline": {
          "type": "string"
        },
        "arrival": {
          "type": "string"
        },
        "cabinClass": {
          "anyOf": [
            {
              "$ref": "#/definitions/CabinClass"
            },
            {
              "type": "null"
            }
          ]
        },
        "departure": {
          "type": "string"
        },
        "duration": {
          "type": [
            "string",
            "null"
          ]
        },
        "flightId": {
          "type": "string"
        },
        "flightNumber": {
          "type": [
            "string",
            "null"
          ]
        },
        "price": {
          "type": "number",
          "format": "double"
        },
        "stops": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "Insurance": {
      "type": "object",
      "required": [
        "selected"
      ],
      "properties": {
        "insurance_type": {
          "anyOf": [
            {
              "$ref": "#/definitions/InsuranceType"
            },
            {
              "type": "null"
            }
          ]
        },
        "price": {
          "type": [
            "number",
            "null"
          ],
          "format": "double"
        },
        "selected": {
          "type": "boolean"
        }
      }
    },
    "InsuranceType": {
      "type": "string",
      "enum": [
        "basic",
        "comprehensive",
        "premium"
      ]
    },
    "PassengerDetail": {
      "type": "object",
      "required": [
        "dateOfBirth",
        "firstName",
        "lastName",
        "passengerType"
      ],
      "properties": {
        "dateOfBirth": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "nationality": {
          "type": [
            "string",
            "null"
          ]
        },
        "passengerType": {
          "$ref": "#/definitions/PassengerType"
        },
        "passportNumber": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "PassengerType": {
      "type": "string",
      "enum": [
        "adult",
        "child",
        "infant"
      ]
    },
    "Passengers": {
      "type": "object",
      "required": [
        "adults",
        "children",
        "infants",
        "total"
      ],
      "properties": {
        "adults": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "children": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "details": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/PassengerDetail"
          }
        },
        "infants": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "total": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "Payment": {
      "type": "object",
      "required": [
        "status"
      ],
      "properties": {
        "method": {
          "anyOf": [
            {
              "$ref": "#/definitions/PaymentMethod"
            },
            {
              "type": "null"
            }
          ]
        },
        "status": {
          "$ref": "#/definitions/PaymentStatus"
        },
        "transaction_id": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "PaymentMethod": {
      "type": "string",
      "enum": [
        "credit_card",
        "debit_card",
        "paypal",
        "bank_transfer"
      ]
    },
    "PaymentStatus": {
      "type": "string",
      "enum": [
        "pending",
        "processing",
        "completed",
        "failed",
        "refunded"
      ]
    },
    "Pricing": {
      "type": "object",
      "required": [
        "basePrice",
        "currency",
        "taxes",
        "totalPrice"
      ],
      "properties": {
        "basePrice": {
          "type": "number",
          "format": "double"
        },
        "currency": {
          "type": "string"
        },
        "taxes": {
          "type": "number",
          "format": "double"
        },
        "totalPrice": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "SearchResults": {
      "type": "object",
      "required": [
        "totalResults"
      ],
      "properties": {
        "outbound": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/FlightOption"
          }
        },
        "returnFlights": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/FlightOption"
          }
        },
        "totalResults": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "TripType": {
      "type": "string",
      "enum": [
        "one-way",
        "round-trip",
        "multi-city"
      ]
    }
  }
}